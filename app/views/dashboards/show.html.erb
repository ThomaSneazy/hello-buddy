<h1>Dashboard</h1>

<div class="d-flex align-items-start">
  <div class="nav flex-column nav-pills me-6" id="v-pills-tab" role="tablist" aria-orientation="vertical">
    <button class="nav-link active" id="v-pills-home-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home" type="button" role="tab" aria-controls="v-pills-home" aria-selected="true">Notification Activités</button>
    <button class="nav-link" id="v-pills-home2-tab" data-bs-toggle="pill" data-bs-target="#v-pills-home2" type="button" role="tab" aria-controls="v-pills-home2" aria-selected="true">Notification Participations</button>
    <button class="nav-link" id="v-pills-profile-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile" type="button" role="tab" aria-controls="v-pills-profile" aria-selected="false">Activités Validées</button>
    <button class="nav-link" id="v-pills-profile2-tab" data-bs-toggle="pill" data-bs-target="#v-pills-profile2" type="button" role="tab" aria-controls="v-pills-profile2" aria-selected="false">Activités Refusées</button>
    <button class="nav-link" id="v-pills-messages-tab" data-bs-toggle="pill" data-bs-target="#v-pills-messages" type="button" role="tab" aria-controls="v-pills-messages" aria-selected="false">Participations Comfirmées</button>
    <button class="nav-link" id="v-pills-messages2-tab" data-bs-toggle="pill" data-bs-target="#v-pills-messages2" type="button" role="tab" aria-controls="v-pills-messages2" aria-selected="false">Participations Déclinées</button>

  </div>
  <div class="tab-content" id="v-pills-tabContent">
    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
        <p>Notifications d'activités</p>
        <% @my_activities.each do |activity| %>
          <ul >
            <% activity.bookings.each do |booking| %>
              <% if !booking.validated  &&  !booking.refused%>
                <li><%= activity.title %> le <%= Time.at(activity.start_date).strftime('%F')  %>  Participant: <%= booking.user.first_name.capitalize %>
                <%= link_to 'Confirmer', validation_path(booking), method: :patch, class: 'button-34 green' %> <%= link_to 'Décliner', refused_path(booking), method: :patch, class: 'button-34 red' %> </li>
              <% end %>
            <% end %>
          </ul>
        <% end %>
    </div>

    <div class="tab-pane fade" id="v-pills-home2" role="tabpanel" aria-labelledby="v-pills-home2-tab">
                 <p>Notification de participations</p>
                    <% @my_participations.each do |participation| %>
                      <ul >
                        <% if !participation.validated &&  !participation.refused %>
                          <li> <%= participation.activity.title %> le <%= Time.at(participation.activity.start_date).strftime('%F') %> Organisateur: <%= participation.activity.user.first_name.capitalize %>   <%= link_to booking_path(participation), method: :delete, data: { confirm: "Are you sure?" } do %>
                                <i class="fa-solid fa-trash"></i>
                              <% end %> </li>
                        <% end %>
                      </ul>
                    <% end %>
    </div>

    <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
            <p>Activités validées</p>
            <% @my_activities.each do |activity| %>
              <ul>
                <% activity.bookings.each do |booking| %>
                  <% if booking.validated && !booking.refused %>
                    <li><%= activity.title %> le <%= Time.at(activity.start_date).strftime('%F') %> Participant: <%= booking.user.first_name.capitalize %> </li>
                  <% end %>
                <% end %>
              </ul>
            <% end %>
    </div>

    <div class="tab-pane fade" id="v-pills-profile2" role="tabpanel" aria-labelledby="v-pills-profile2-tab">
            <p>Activités refusées </p>
            <% @my_activities.each do |activity| %>
              <ul>
                <% activity.bookings.each do |booking| %>
                  <% if booking.refused && !booking.validated  %>
                    <li><%= activity.title %> le <%= Time.at(activity.start_date).strftime('%F') %> Participant: <%= booking.user.first_name.capitalize %> </li>
                  <% end %>
                <% end %>
              </ul>
            <% end %>

    </div>

    <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
          <p>Participations confirmées</p>
          <% @my_participations.each do |participation| %>

              <ul >
                <% if participation.validated && !participation.refused %>
                  <li><%= participation.activity.title %> le <%= Time.at(participation.activity.start_date).strftime('%F') %> Organisateur: <%= participation.activity.user.first_name.capitalize %> </li>
                <% end %>
              </ul>

            <% end %>


    </div>

    <div class="tab-pane fade" id="v-pills-messages2" role="tabpanel" aria-labelledby="v-pills-messages2-tab">
          <p>Participations déclinées</p>
            <% @my_participations.each do |participation| %>

                  <ul>
                    <% if participation.refused && !participation.validated %>
                      <li><%= participation.activity.title %> le <%= Time.at(participation.activity.start_date).strftime('%F') %> Organisateur: <%= participation.activity.user.first_name.capitalize %></li>
                    <% end %>
                  </ul>
              <% end %>
    </div>

  </div>
</div>
